<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ Ù…Ø­Ù„Ù„ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ© | National ID Analyzer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ù…ØªÙ‚Ø¯Ù…Ø© Ù…Ø¹ ØªØ£Ø«ÙŠØ±Ø§Øª ÙÙ†ÙŠØ© */
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #ff7e5f;
            --accent-color: #6b48ff;
            --text-dark: #2c3e50;
            --text-light: #f8f9fa;
            --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--gradient-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            direction: rtl;
            color: var(--text-dark);
            background-attachment: fixed;
            background-size: cover;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 550px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
            margin: 20px;
        }
        
        .container:hover {
            transform: translateY(-5px);
        }
        
        .container::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 28px;
            position: relative;
            display: inline-block;
            padding-bottom: 10px;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50%;
            height: 3px;
            background: linear-gradient(90deg, var(--secondary-color), transparent);
            border-radius: 3px;
        }
        
        .input-group {
            position: relative;
            margin: 20px 0;
        }
        
        .input-group i {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            left: 15px;
            color: var(--primary-color);
            font-size: 18px;
        }
        
        select, input, button {
            width: 100%;
            padding: 12px 15px 12px 40px;
            margin: 8px 0;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        
        select:focus, input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }
        
        button {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
            letter-spacing: 0.5px;
            padding: 12px;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background: linear-gradient(135deg, var(--accent-color), var(--primary-color));
            box-shadow: 0 5px 15px rgba(107, 72, 255, 0.4);
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        button:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨ÙˆØ¨ Ø£Ø¨ Ø¨Ø´ÙƒÙ„ ÙÙ†ÙŠ */
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            animation: fadeIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border-top: 5px solid var(--primary-color);
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -60%) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .popup-title {
            color: var(--primary-color);
            margin: 0;
            font-size: 22px;
        }
        
        .popup table {
            width: 100%;
            margin-top: 15px;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .popup th, .popup td {
            border: 1px solid #e0e0e0;
            padding: 12px;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .popup tr:hover td {
            background-color: #f5f7fa;
        }
        
        .popup th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .popup td {
            background-color: white;
        }
        
        .popup .close-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: transparent;
            color: #ff6b6b;
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .popup .close-btn:hover {
            transform: rotate(90deg);
            background: rgba(255, 107, 107, 0.1);
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ÙˆÙØ±Ù„Ø§ÙŠ */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ */
        .error {
            color: #ff6b6b;
            font-size: 14px;
            margin-top: 5px;
            text-align: right;
            font-weight: 500;
            animation: shake 0.5s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø­Ù‚Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® */
        .date-picker {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .date-picker label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
            font-weight: 600;
            text-align: right;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .result-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border-left: 4px solid var(--primary-color);
            text-align: right;
        }
        
        .result-card h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
            font-size: 18px;
        }
        
        .result-card p {
            margin: 0;
            font-size: 16px;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            select, input, button {
                padding: 10px 10px 10px 35px;
                font-size: 14px;
            }
            
            .input-group i {
                font-size: 16px;
                left: 10px;
            }
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(74, 111, 165, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(74, 111, 165, 0); }
            100% { box-shadow: 0 0 0 0 rgba(74, 111, 165, 0); }
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-container {
            width: 100%;
            height: 5px;
            background: #e0e0e0;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¯Ø®ÙˆÙ„ */
        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }
        
        .slide-in {
            animation: slideIn 0.8s ease forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙˆØ³Ø§Ø¦Ø· Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© */
        .social-links {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        
        .social-links a {
            color: var(--primary-color);
            font-size: 20px;
            transition: all 0.3s ease;
        }
        
        .social-links a:hover {
            color: var(--secondary-color);
            transform: translateY(-3px);
        }
        
        /* ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© */
        footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù†Øµ */
        .highlight {
            background: linear-gradient(120deg, rgba(74, 111, 165, 0.2), rgba(74, 111, 165, 0));
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
<div class="container floating">
    <h1 class="slide-in"><i class="fas fa-id-card"></i> Ù…Ø­Ù„Ù„ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ©</h1>
    
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… (Ø³ÙŠØªÙ… Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ù‡ Ø¹Ø¨Ø± Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª) -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© -->
    <div class="input-group">
        <i class="fas fa-language"></i>
        <select id="language" onchange="changeLanguage()">
            <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡ªğŸ‡¬</option>
            <option value="en">English ğŸ‡¬ğŸ‡§</option>
        </select>
    </div>
    
    <!-- Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ -->
    <div class="input-group">
        <i class="fas fa-fingerprint"></i>
        <input type="text" id="nationalID" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ù‡Ù†Ø§ (14 Ø±Ù‚Ù…Ù‹Ø§)..." maxlength="14" oninput="validateNationalID(this)">
        <div id="idError" class="error"></div>
    </div>
    <button onclick="analyzeNationalID()" class="pulse"><i class="fas fa-search"></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</button>
    
    <!-- Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…Ø± -->
    <div class="date-picker fade-in">
        <label for="dobPicker"><i class="fas fa-birthday-cake"></i> ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</label>
        <div class="input-group">
            <i class="fas fa-calendar-day"></i>
            <input type="date" id="dobPicker" onchange="updateDobInput(this.value)">
        </div>
        <div class="input-group">
            <i class="fas fa-calendar-alt"></i>
            <input type="text" id="dob" placeholder="Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)" oninput="validateDateInput(this)">
        </div>
        <button onclick="calculateAge()"><i class="fas fa-calculator"></i> Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø±</button>
        <div id="dobError" class="error"></div>
    </div>
    
    <!-- Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ† -->
    <div class="date-picker fade-in">
        <label for="date1Picker"><i class="fas fa-calendar-check"></i> Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„:</label>
        <div class="input-group">
            <i class="fas fa-calendar-day"></i>
            <input type="date" id="date1Picker" onchange="updateDate1Input(this.value)">
        </div>
        <div class="input-group">
            <i class="fas fa-calendar-alt"></i>
            <input type="text" id="date1" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)" oninput="validateDateInput(this)">
        </div>
        
        <label for="date2Picker"><i class="fas fa-calendar-check"></i> Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ù†ÙŠ:</label>
        <div class="input-group">
            <i class="fas fa-calendar-day"></i>
            <input type="date" id="date2Picker" onchange="updateDate2Input(this.value)">
        </div>
        <div class="input-group">
            <i class="fas fa-calendar-alt"></i>
            <input type="text" id="date2" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ù†ÙŠ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)" oninput="validateDateInput(this)">
        </div>
        <button onclick="calculateDateDifference()"><i class="fas fa-clock"></i> Ø§Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ†</button>
        <div id="dateError" class="error"></div>
    </div>
    
    <!-- Ø±ÙˆØ§Ø¨Ø· Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© -->
    <div class="social-links">
        <a href="#" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ"><i class="fab fa-facebook"></i></a>
        <a href="#" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ØªÙˆÙŠØªØ±"><i class="fab fa-twitter"></i></a>
        <a href="#" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨"><i class="fab fa-whatsapp"></i></a>
        <a href="#" title="Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"><i class="fas fa-envelope"></i></a>
    </div>
    
    <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© -->
    <footer>
        <p>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø­Ø¨ â¤ï¸ Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆØ§Ø·Ù† Ø§Ù„Ù…ØµØ±ÙŠ | &copy; 2023</p>
    </footer>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
<div class="popup" id="resultsPopup">
    <button class="close-btn" onclick="closePopup()">&times;</button>
    <div class="popup-header">
        <h2 class="popup-title"><i class="fas fa-chart-pie"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„</h2>
    </div>
    
    <div id="popupResultsBody">
        <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
    </div>
    
    <div class="result-card" id="summaryCard" style="display: none;">
        <h3><i class="fas fa-info-circle"></i> Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h3>
        <p id="summaryText"></p>
    </div>
    
    <button onclick="closePopup()" style="margin-top: 20px;"><i class="fas fa-check"></i> ÙÙ‡Ù…ØªØŒ Ø´ÙƒØ±Ù‹Ø§!</button>
</div>

<!-- Ø·Ø¨Ù‚Ø© Ø§Ù„ØªØ¹ØªÙŠÙ… -->
<div class="overlay" id="overlay"></div>

<script>
    // ÙƒØ§Ø¦Ù† Ø§Ù„Ù„ØºØ© Ù…Ø¹ ÙƒÙ„ Ø§Ù„Ù†ØµÙˆØµ
    const languageTexts = {
        ar: {
            analyzeBtn: "<i class='fas fa-search'></i> ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ",
            ageBtn: "<i class='fas fa-calculator'></i> Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù…Ø±",
            dateDiffBtn: "<i class='fas fa-clock'></i> Ø§Ø­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ†",
            dobPlaceholder: "Ø£Ø¯Ø®Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)",
            nationalIDPlaceholder: "Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ù‡Ù†Ø§ (14 Ø±Ù‚Ù…Ù‹Ø§)...",
            date1Placeholder: "Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)",
            date2Placeholder: "Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ù†ÙŠ (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)",
            popupTitle: "Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„",
            closeBtn: "ÙÙ‡Ù…ØªØŒ Ø´ÙƒØ±Ù‹Ø§!",
            idError: "Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ù…Ù† 14 Ø±Ù‚Ù…Ù‹Ø§ ÙÙ‚Ø·!",
            dateError: "ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­! ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµÙŠØºØ© (ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©)",
            governorates: {
                "01": "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", "02": "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", "03": "Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯", "04": "Ø§Ù„Ø³ÙˆÙŠØ³", 
                "11": "Ø¯Ù…ÙŠØ§Ø·", "12": "Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©", "13": "Ø§Ù„Ø´Ø±Ù‚ÙŠØ©", "14": "Ø§Ù„Ù‚Ù„ÙŠÙˆØ¨ÙŠØ©", 
                "15": "ÙƒÙØ± Ø§Ù„Ø´ÙŠØ®", "16": "Ø§Ù„ØºØ±Ø¨ÙŠØ©", "17": "Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©", "18": "Ø§Ù„Ø¨Ø­ÙŠØ±Ø©", 
                "19": "Ø§Ù„Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ÙŠØ©", "21": "Ø§Ù„Ø¬ÙŠØ²Ø©", "22": "Ø¨Ù†ÙŠ Ø³ÙˆÙŠÙ", "23": "Ø§Ù„ÙÙŠÙˆÙ…", 
                "24": "Ø§Ù„Ø£Ù‚ØµØ±", "25": "Ø³ÙˆÙ‡Ø§Ø¬", "26": "Ù‚Ù†Ø§", "27": "Ø£Ø³ÙˆØ§Ù†",
                "28": "Ø£Ø³ÙˆØ·", "29": "Ù…Ø·Ø±ÙˆØ­", "31": "Ø´Ù…Ø§Ù„ Ø³ÙŠÙ†Ø§Ø¡", "32": "Ø¬Ù†ÙˆØ¨ Ø³ÙŠÙ†Ø§Ø¡", 
                "33": "Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±", "88": "Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±ÙŠØ©"
            },
            resultTitles: {
                birthDate: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯",
                age: "Ø§Ù„Ø¹Ù…Ø±",
                gender: "Ø§Ù„Ø¬Ù†Ø³",
                governorate: "Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©",
                daysUntilBirthday: "Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯",
                dateDifference: "Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ†"
            },
            gender: {
                male: "Ø°ÙƒØ±",
                female: "Ø£Ù†Ø«Ù‰"
            }
        },
        en: {
            analyzeBtn: "<i class='fas fa-search'></i> Analyze National ID",
            ageBtn: "<i class='fas fa-calculator'></i> Calculate Age",
            dateDiffBtn: "<i class='fas fa-clock'></i> Calculate Date Difference",
            dobPlaceholder: "Enter date of birth (DD-MM-YYYY)",
            nationalIDPlaceholder: "Enter national ID here (14 digits)...",
            date1Placeholder: "Enter first date (DD-MM-YYYY)",
            date2Placeholder: "Enter second date (DD-MM-YYYY)",
            popupTitle: "Analysis Results",
            closeBtn: "Got it, thanks!",
            idError: "National ID must be exactly 14 digits!",
            dateError: "Invalid date! Please use format (DD-MM-YYYY)",
            governorates: {
                "01": "Cairo", "02": "Alexandria", "03": "Port Said", "04": "Suez", 
                "11": "Damietta", "12": "Dakahlia", "13": "Sharqia", "14": "Qalyubia", 
                "15": "Kafr El Sheikh", "16": "Gharbia", "17": "Monufia", "18": "Beheira", 
                "19": "Ismailia", "21": "Giza", "22": "Beni Suef", "23": "Faiyum", 
                "24": "Luxor", "25": "Minya", "26": "Qena", "27": "Aswan",
                "28": "Asyut", "29": "Matruh", "31": "North Sinai", "32": "South Sinai", 
                "33": "Red Sea", "88": "Outside Egypt"
            },
            resultTitles: {
                birthDate: "Birth Date",
                age: "Age",
                gender: "Gender",
                governorate: "Governorate",
                daysUntilBirthday: "Days Until Birthday",
                dateDifference: "Date Difference"
            },
            gender: {
                male: "Male",
                female: "Female"
            }
        }
    };

    let currentLanguage = "ar"; // Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©

    // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
    function changeLanguage() {
        currentLanguage = document.getElementById("language").value;
        updateUI();
        animateLanguageChange();
    }

    // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    function updateUI() {
        const lang = languageTexts[currentLanguage];
        
        document.querySelector('button[onclick="analyzeNationalID()"]').innerHTML = lang.analyzeBtn;
        document.querySelector('button[onclick="calculateAge()"]').innerHTML = lang.ageBtn;
        document.querySelector('button[onclick="calculateDateDifference()"]').innerHTML = lang.dateDiffBtn;
        document.getElementById("dob").placeholder = lang.dobPlaceholder;
        document.getElementById("nationalID").placeholder = lang.nationalIDPlaceholder;
        document.getElementById("date1").placeholder = lang.date1Placeholder;
        document.getElementById("date2").placeholder = lang.date2Placeholder;
        document.querySelector(".popup-title").innerHTML = `<i class="fas fa-chart-pie"></i> ${lang.popupTitle}`;
        document.querySelector('.popup button').innerHTML = `<i class="fas fa-check"></i> ${lang.closeBtn}`;
    }

    // ØªØ£Ø«ÙŠØ± Ø­Ø±ÙƒÙŠ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©
    function animateLanguageChange() {
        const container = document.querySelector('.container');
        container.style.animation = 'none';
        void container.offsetWidth; // Trigger reflow
        container.style.animation = 'fadeIn 0.8s ease forwards';
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        updateProgressBar(30);
    }

    // ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
    function validateNationalID(input) {
        const errorDiv = document.getElementById("idError");
        const lang = languageTexts[currentLanguage];
        
        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø£Ø­Ø±Ù ØºÙŠØ± Ø±Ù‚Ù…ÙŠØ©
        input.value = input.value.replace(/\D/g, '');
        
        // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·ÙˆÙ„
        if (input.value.length > 14) {
            input.value = input.value.substring(0, 14);
            errorDiv.textContent = lang.idError;
            shakeElement(input);
        } else {
            errorDiv.textContent = "";
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        updateProgressBar((input.value.length / 14) * 30);
    }

    // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ
    function analyzeNationalID() {
        const id = document.getElementById("nationalID").value;
        const errorDiv = document.getElementById("idError");
        const lang = languageTexts[currentLanguage];
        
        if (id.length !== 14 || isNaN(id)) {
            errorDiv.textContent = lang.idError;
            shakeElement(document.getElementById("nationalID"));
            return;
        }
        
        errorDiv.textContent = "";
        updateProgressBar(60);
        
        const century = id.charAt(0);
        const year = parseInt(id.substring(1, 3));
        const month = parseInt(id.substring(3, 5));
        const day = parseInt(id.substring(5, 7));
        const genderCode = parseInt(id.charAt(12));
        const governorateCode = id.substring(7, 9);
        
        const birthDate = new Date((century === "2" ? "19" : "20") + year, month - 1, day);
        const gender = genderCode >= 1 && genderCode <= 4 ? lang.gender.male : lang.gender.female;
        const governorate = lang.governorates[governorateCode] || lang.resultTitles.governorate + " ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        
        const today = new Date();
        let ageYears = today.getFullYear() - birthDate.getFullYear();
        let ageMonths = today.getMonth() - birthDate.getMonth();
        let ageDays = today.getDate() - birthDate.getDate();
        
        if (ageDays < 0) {
            ageMonths--;
            ageDays += getDaysInMonth(today.getFullYear(), today.getMonth());
        }
        if (ageMonths < 0) {
            ageYears--;
            ageMonths += 12;
        }
        
        const daysUntilBirthday = calculateDaysUntilBirthday(birthDate);
        
        const results = [
            { key: lang.resultTitles.birthDate, value: formatDate(birthDate), icon: "fas fa-birthday-cake" },
            { key: lang.resultTitles.age, value: `${ageYears} ${currentLanguage === "ar" ? "Ø³Ù†Ø©" : "years"}, ${ageMonths} ${currentLanguage === "ar" ? "Ø´Ù‡Ø±" : "months"}, ${ageDays} ${currentLanguage === "ar" ? "ÙŠÙˆÙ…" : "days"}`, icon: "fas fa-user-clock" },
            { key: lang.resultTitles.gender, value: gender, icon: gender === lang.gender.male ? "fas fa-mars" : "fas fa-venus" },
            { key: lang.resultTitles.governorate, value: governorate, icon: "fas fa-map-marker-alt" },
            { key: lang.resultTitles.daysUntilBirthday, value: `${daysUntilBirthday} ${currentLanguage === "ar" ? "ÙŠÙˆÙ…" : "days"}`, icon: "fas fa-gift" }
        ];
        
        showPopup(results, lang.resultTitles.birthDate);
        updateProgressBar(100);
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø±
    function calculateAge() {
        const dob = document.getElementById("dob").value;
        const errorDiv = document.getElementById("dobError");
        const lang = languageTexts[currentLanguage];
        
        if (!isValidDate(dob)) {
            errorDiv.textContent = lang.dateError;
            shakeElement(document.getElementById("dob"));
            return;
        }
        
        errorDiv.textContent = "";
        updateProgressBar(60);
        
        const [day, month, year] = dob.split("-").map(Number);
        const today = new Date();
        const birthDate = new Date(year, month - 1, day);
        
        let ageYears = today.getFullYear() - birthDate.getFullYear();
        let ageMonths = today.getMonth() - birthDate.getMonth();
        let ageDays = today.getDate() - birthDate.getDate();
        
        if (ageDays < 0) {
            ageMonths--;
            ageDays += getDaysInMonth(today.getFullYear(), today.getMonth());
        }
        if (ageMonths < 0) {
            ageYears--;
            ageMonths += 12;
        }
        
        const daysUntilBirthday = calculateDaysUntilBirthday(birthDate);
        
        const results = [
            { key: lang.resultTitles.birthDate, value: formatDate(birthDate), icon: "fas fa-birthday-cake" },
            { key: lang.resultTitles.age, value: `${ageYears} ${currentLanguage === "ar" ? "Ø³Ù†Ø©" : "years"}, ${ageMonths} ${currentLanguage === "ar" ? "Ø´Ù‡Ø±" : "months"}, ${ageDays} ${currentLanguage === "ar" ? "ÙŠÙˆÙ…" : "days"}`, icon: "fas fa-user-clock" },
            { key: lang.resultTitles.daysUntilBirthday, value: `${daysUntilBirthday} ${currentLanguage === "ar" ? "ÙŠÙˆÙ…" : "days"}`, icon: "fas fa-gift" }
        ];
        
        showPopup(results, lang.resultTitles.age);
        updateProgressBar(100);
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠÙ†
    function calculateDateDifference() {
        const date1 = document.getElementById("date1").value;
        const date2 = document.getElementById("date2").value;
        const errorDiv = document.getElementById("dateError");
        const lang = languageTexts[currentLanguage];
        
        if (!isValidDate(date1) || !isValidDate(date2)) {
            errorDiv.textContent = lang.dateError;
            if (!isValidDate(date1)) shakeElement(document.getElementById("date1"));
            if (!isValidDate(date2)) shakeElement(document.getElementById("date2"));
            return;
        }
        
        errorDiv.textContent = "";
        updateProgressBar(60);
        
        const [d1, m1, y1] = date1.split("-").map(Number);
        const [d2, m2, y2] = date2.split("-").map(Number);
        
        const firstDate = new Date(y1, m1 - 1, d1);
        const secondDate = new Date(y2, m2 - 1, d2);
        
        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø«Ø§Ù†ÙŠ
        let startDate, endDate;
        if (firstDate < secondDate) {
            startDate = firstDate;
            endDate = secondDate;
        } else {
            startDate = secondDate;
            endDate = firstDate;
        }
        
        const diffTime = Math.abs(endDate - startDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        const diffYears = Math.floor(diffDays / 365);
        const remainingDays = diffDays % 365;
        const diffMonths = Math.floor(remainingDays / 30);
        const finalDays = remainingDays % 30;
        
        let dateDiffText;
        if (currentLanguage === "ar") {
            dateDiffText = `${diffYears} Ø³Ù†Ø© Ùˆ ${diffMonths} Ø´Ù‡Ø± Ùˆ ${finalDays} ÙŠÙˆÙ…`;
        } else {
            dateDiffText = `${diffYears} years, ${diffMonths} months, and ${finalDays} days`;
        }
        
        const results = [
            { key: lang.resultTitles.birthDate + " 1", value: formatDate(firstDate), icon: "fas fa-calendar-day" },
            { key: lang.resultTitles.birthDate + " 2", value: formatDate(secondDate), icon: "fas fa-calendar-day" },
            { key: lang.resultTitles.dateDifference, value: dateDiffText, icon: "fas fa-hourglass-half" }
        ];
        
        showPopup(results, lang.resultTitles.dateDifference);
        updateProgressBar(100);
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®
    function isValidDate(dateStr) {
        const regex = /^(\d{2})-(\d{2})-(\d{4})$/;
        if (!regex.test(dateStr)) return false;
        
        const [_, day, month, year] = dateStr.match(regex).map(Number);
        const date = new Date(year, month - 1, day);
        
        return date.getDate() === day && 
               date.getMonth() + 1 === month && 
               date.getFullYear() === year;
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø­ØªÙ‰ Ø¹ÙŠØ¯ Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
    function calculateDaysUntilBirthday(birthDate) {
        const today = new Date();
        const thisYearBirthday = new Date(today.getFullYear(), birthDate.getMonth(), birthDate.getDate());
        
        if (thisYearBirthday < today) {
            thisYearBirthday.setFullYear(today.getFullYear() + 1);
        }
        
        return Math.ceil((thisYearBirthday - today) / (1000 * 60 * 60 * 24));
    }

    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø±
    function getDaysInMonth(year, month) {
        return new Date(year, month + 1, 0).getDate();
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showPopup(results, title) {
        const popup = document.getElementById("resultsPopup");
        const overlay = document.getElementById("overlay");
        const tbody = document.getElementById("popupResultsBody");
        const summaryCard = document.getElementById("summaryCard");
        const summaryText = document.getElementById("summaryText");
        
        // Ù…Ø³Ø­ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        tbody.innerHTML = "";
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        results.forEach(result => {
            const row = document.createElement("tr");
            
            const keyCell = document.createElement("td");
            keyCell.innerHTML = `<i class="${result.icon}"></i> ${result.key}`;
            keyCell.style.fontWeight = "600";
            keyCell.style.color = "var(--primary-color)";
            
            const valueCell = document.createElement("td");
            valueCell.textContent = result.value;
            
            row.appendChild(keyCell);
            row.appendChild(valueCell);
            tbody.appendChild(row);
        });
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        if (title === languageTexts[currentLanguage].resultTitles.birthDate) {
            summaryCard.style.display = "block";
            summaryText.textContent = currentLanguage === "ar" 
                ? "ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ø¨Ù†Ø¬Ø§Ø­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ø£ØºØ±Ø§Ø¶ Ø±Ø³Ù…ÙŠØ© Ø£Ùˆ Ø´Ø®ØµÙŠØ©."
                : "National ID analyzed successfully. You can use this information for official or personal purposes.";
        } else if (title === languageTexts[currentLanguage].resultTitles.age) {
            summaryCard.style.display = "block";
            summaryText.textContent = currentLanguage === "ar" 
                ? "ØªÙ… Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø± Ø¨Ø¯Ù‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ù…Ø¯Ø®Ù„."
                : "Age calculated accurately based on the entered date of birth.";
        } else {
            summaryCard.style.display = "none";
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙˆØ¨ Ø£Ø¨ ÙˆØ§Ù„Ø£ÙˆÙØ±Ù„Ø§ÙŠ
        popup.style.display = "block";
        overlay.style.display = "block";
        
        // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¯Ø®ÙˆÙ„
        popup.style.animation = "none";
        void popup.offsetWidth; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        popup.style.animation = "fadeIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards";
    }

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function closePopup() {
        const popup = document.getElementById("resultsPopup");
        const overlay = document.getElementById("overlay");
        
        popup.style.animation = "none";
        void popup.offsetWidth; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        popup.style.animation = "fadeIn 0.3s ease reverse forwards";
        
        setTimeout(() => {
            popup.style.display = "none";
            overlay.style.display = "none";
        }, 300);
    }

    // ØªØ­Ø¯ÙŠØ« Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ù…Ù† Ø§Ù„ØªÙ‚ÙˆÙŠÙ…
    function updateDobInput(value) {
        const dobInput = document.getElementById("dob");
        if (!value) return;
        
        const [year, month, day] = value.split("-");
        dobInput.value = `${day}-${month}-${year}`;
        document.getElementById("dobError").textContent = "";
    }

    // ØªØ­Ø¯ÙŠØ« Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ù…Ù† Ø§Ù„ØªÙ‚ÙˆÙŠÙ…
    function updateDate1Input(value) {
        const date1Input = document.getElementById("date1");
        if (!value) return;
        
        const [year, month, day] = value.split("-");
        date1Input.value = `${day}-${month}-${year}`;
        document.getElementById("dateError").textContent = "";
    }

    // ØªØ­Ø¯ÙŠØ« Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ® Ù…Ù† Ø§Ù„ØªÙ‚ÙˆÙŠÙ…
    function updateDate2Input(value) {
        const date2Input = document.getElementById("date2");
        if (!value) return;
        
        const [year, month, day] = value.split("-");
        date2Input.value = `${day}-${month}-${year}`;
        document.getElementById("dateError").textContent = "";
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
    function validateDateInput(input) {
        const errorDivId = input.id === "dob" ? "dobError" : "dateError";
        const errorDiv = document.getElementById(errorDivId);
        const lang = languageTexts[currentLanguage];
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        const regex = /^(\d{0,2})-?(\d{0,2})-?(\d{0,4})$/;
        if (!regex.test(input.value)) {
            input.style.borderColor = "red";
            errorDiv.textContent = lang.dateError;
            return;
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        let value = input.value.replace(/\D/g, '');
        if (value.length > 2 && value.length <= 4) {
            value = value.substring(0, 2) + '-' + value.substring(2);
        } else if (value.length > 4) {
            value = value.substring(0, 2) + '-' + value.substring(2, 4) + '-' + value.substring(4, 8);
        }
        
        input.value = value;
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙƒØªÙ…Ù„Ø§Ù‹
        if (value.length === 10) {
            if (isValidDate(value)) {
                input.style.borderColor = "#4CAF50";
                errorDiv.textContent = "";
            } else {
                input.style.borderColor = "red";
                errorDiv.textContent = lang.dateError;
                shakeElement(input);
            }
        } else {
            input.style.borderColor = "#e0e0e0";
            errorDiv.textContent = "";
        }
    }

    // ØªØ£Ø«ÙŠØ± Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ø¹Ù†ØµØ± Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
    function shakeElement(element) {
        element.style.animation = "none";
        void element.offsetWidth; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        element.style.animation = "shake 0.5s ease";
    }

    // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® Ù„Ø¹Ø±Ø¶Ù‡ Ø¨Ø´ÙƒÙ„ Ø¬Ù…ÙŠÙ„
    function formatDate(date) {
        const options = { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric',
            timeZone: 'UTC'
        };
        
        if (currentLanguage === "ar") {
            return date.toLocaleDateString('ar-EG', options);
        } else {
            return date.toLocaleDateString('en-US', options);
        }
    }

    // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
    function updateProgressBar(percent) {
        const progressBar = document.getElementById("progressBar");
        progressBar.style.width = percent + "%";
        
        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ· Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø³Ø¨Ø©
        if (percent < 30) {
            progressBar.style.background = "linear-gradient(90deg, #ff6b6b, #ff8e8e)";
        } else if (percent < 70) {
            progressBar.style.background = "linear-gradient(90deg, #ffa502, #ffbe76)";
        } else {
            progressBar.style.background = "linear-gradient(90deg, #2ed573, #7bed9f)";
        }
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    window.onload = function() {
        updateUI();
        updateProgressBar(10);
        
        // ØªØ£Ø«ÙŠØ±Ø§Øª Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        const elements = document.querySelectorAll('.input-group, .date-picker, button');
        elements.forEach((el, index) => {
            el.style.opacity = 0;
            el.style.transform = "translateY(20px)";
            el.style.animation = `fadeIn 0.5s ease forwards ${index * 0.1}s`;
        });
    };
</script>
</body>
</html>
